<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Les Indispensables du Latin Juridique</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- FontAwesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <!-- Polices -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Outfit:wght@300;400;600;800&family=Merriweather:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { sans: ['Outfit', 'sans-serif'], serif: ['Merriweather', 'serif'] },
                    colors: {
                        brandBlue: '#0F2C48',
                        brandGold: '#D9A526',
                        brandIvory: '#F6F2E8',
                        brandBronze: '#B4792A',
                    }
                }
            }
        }
    </script>

    <style>
        :root{
            --cta: #D9A526;
            --brand-blue: #0F2C48;
            --ivory: #F6F2E8;
            --bronze: #B4792A;
        }

        body { margin: 0; background-color: var(--ivory); color: var(--brand-blue); font-family: 'Outfit', sans-serif; display: flex; flex-direction: column; min-height: 100vh; }
        .serif-font { font-family: 'Merriweather', serif; }

        /* --- HEADER STICKY --- */
        .top-banner {
            position: sticky; top: 0; left: 0; right: 0; z-index: 10000;
            background: var(--brand-blue); color: white;
            box-shadow: 0 4px 20px rgba(15,44,72,0.25);
            padding: 12px 0; border-bottom: 4px solid var(--cta);
        }
        .top-inner {
            max-width: 1400px; margin: 0 auto; padding: 0 24px;
            display: flex; flex-wrap: wrap; align-items: center; justify-content: space-between; gap: 20px;
        }
        .header-left { display: flex; align-items: center; gap: 16px; flex-shrink: 0; }
        .tb-logo {
            width: 50px; height: 50px; flex: 0 0 50px; border-radius: 50%; overflow: hidden;
            background: white; display: flex; align-items: center; justify-content: center;
            border: 2px solid var(--cta);
        }
        .tb-logo img { width: 100%; height: 100%; object-fit: cover; }
        .tb-text-container { display: flex; flex-direction: column; justify-content: center; }
        .tb-title { font-weight: 700; font-size: 14px; color: white; line-height: 1.3; }
        .tb-title .part2 { color: var(--cta); font-style: italic; font-weight: 600; display: none; } /* Hidden on mobile to save space */
        @media(min-width: 1024px) {
            .tb-title { font-size: 16px; }
            .tb-title .part2 { display: block; }
            .tb-logo { width: 60px; height: 60px; flex: 0 0 60px; }
        }

        /* Navigation Menu Container */
        .nav-menu {
            display: flex; align-items: center; gap: 10px; flex-wrap: wrap; justify-content: center;
        }

        /* Unified Nav Buttons Style */
        .nav-btn {
            display: flex; align-items: center; gap: 8px;
            padding: 8px 16px; border-radius: 20px;
            font-size: 13px; font-weight: 600;
            color: rgba(255,255,255,0.8);
            border: 1px solid transparent;
            transition: all 0.3s ease;
            text-decoration: none;
            background-color: transparent;
            cursor: pointer;
        }
        .nav-btn:hover {
            background-color: rgba(255,255,255,0.1);
            color: white;
            border-color: rgba(255,255,255,0.3);
            transform: translateY(-2px);
        }
        /* Active State for Tabs */
        .nav-btn.active {
            background-color: var(--cta);
            color: var(--brand-blue);
            border-color: var(--cta);
            box-shadow: 0 4px 12px rgba(217,165,38,0.3);
        }
        /* External Links Style (Yellow Border) */
        .nav-btn.external {
            border: 1px solid rgba(217, 165, 38, 0.4);
        }

        /* --- UTILS LEXIQUE --- */
        .brand-blue-text { color: #0F2C48; }
        .brand-blue-bg { background-color: #0F2C48; }
        .brand-yellow-text { color: #D9A526; }
        .brand-yellow-bg { background-color: #D9A526; }
        .brand-ivory-bg { background-color: #F6F2E8; }
        .brand-bronze-text { color: #B4792A; }
        
        /* Flip Card Effects */
        .perspective { perspective: 1000px; }
        .card-inner {
            position: relative; width: 100%; height: 100%;
            text-align: center; transition: transform 0.6s; transform-style: preserve-3d;
        }
        .card-front, .card-back {
            position: absolute; width: 100%; height: 100%;
            -webkit-backface-visibility: hidden; backface-visibility: hidden;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        .card-back { transform: rotateY(180deg); overflow-y: auto; }
        .flipped .card-inner { transform: rotateY(180deg); }

        /* Accordion Transition */
        .accordion-content { transition: max-height 0.3s ease-out; max-height: 0; overflow: hidden; }
        .accordion-content.open { max-height: 5000px; transition: max-height 0.5s ease-in; }

        /* Scrollbar */
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }

        /* Responsive */
        @media (max-width: 768px) {
            .top-inner { flex-direction: column; gap: 15px; text-align: center; }
            .header-left { flex-direction: column; }
            .nav-menu { width: 100%; justify-content: center; gap: 8px; }
            .nav-btn { width: auto; flex-grow: 1; justify-content: center; font-size: 12px; padding: 8px 10px; }
        }
    </style>
</head>
<body>

    <!-- === A. LE HEADER COMPLET === -->
    <div class="top-banner">
        <div class="top-inner">
            <!-- Logo & Titre -->
            <div class="header-left">
                <div class="tb-logo">
                    <img src="https://projettechacademy.github.io/Juridique/Asset/Logo_juriste.png" alt="Logo" onerror="this.src='https://projettechacademy.github.io/Juridique/Asset/Logo_juriste.jpg'">
                </div>
                <div class="tb-text-container">
                    <div class="tb-title">
                        <span class="part1">üí´ The Jurist Elite Club By Studi ‚ú®</span><br>
                        <span class="part2">La Villa des Juristes Bris√©s üíî sur l‚Äô√éle de L‚ÄôINSTRUCTION !üèù</span>
                    </div>
                </div>
            </div>

            <!-- Barre de Navigation Unifi√©e -->
            <div class="nav-menu">
                <!-- Accueil -->
                <a href="index.html" class="nav-btn">
                    <i class="fa-solid fa-house"></i> Accueil
                </a>

                <!-- Onglet 1: Lexique -->
                <button onclick="switchTab('lexique')" id="tab-lexique" class="nav-btn active">
                    <i class="fa-solid fa-book"></i> Lexique A-Z
                </button>

                <!-- Onglet 2: Jeu -->
                <button onclick="switchTab('game')" id="tab-game" class="nav-btn">
                    <i class="fa-solid fa-graduation-cap"></i> Jeu / Entra√Ænement
                </button>

                <!-- Liens Externes -->
                <a href="https://projettechacademy.github.io/Juridique/00_Autres/formation_live_juriste.html" target="_blank" class="nav-btn external">
                    <i class="fa-solid fa-video"></i> Planning Live
                </a>

                <a href="https://projettechacademy.github.io/Juridique/00_Autres/Mon_Espace_Juriste_Tableau_de_bord_personnel.html" target="_blank" class="nav-btn external">
                    <i class="fa-solid fa-user-tie"></i> Mon Espace
                </a>
            </div>
        </div>
    </div>

    <!-- === C. CONTENU PRINCIPAL === -->
    <main class="flex-grow w-full max-w-7xl mx-auto p-4 md:p-8 relative">

        <!-- VIEW 1: LEXIQUE (Accord√©ons) -->
        <div id="view-lexique" class="transition-opacity duration-300">
            
            <div class="bg-white p-6 rounded-lg shadow-sm border-l-4 border-[#D9A526] mb-8">
                <div class="flex flex-col md:flex-row gap-4 items-center">
                    <div class="relative w-full md:w-2/3">
                        <i class="fa-solid fa-magnifying-glass absolute left-4 top-1/2 transform -translate-y-1/2 brand-blue-text"></i>
                        <input type="text" id="searchInput" placeholder="Rechercher un mot latin, une d√©finition..." 
                               class="w-full pl-10 pr-4 py-3 bg-[#F6F2E8] border border-slate-300 rounded focus:ring-2 focus:ring-[#D9A526] focus:border-[#D9A526] outline-none shadow-sm transition-all text-[#0F2C48]">
                    </div>
                    <div class="w-full md:w-1/3 text-right">
                        <span class="text-sm font-bold brand-blue-text"><span id="total-terms">0</span> locutions r√©f√©renc√©es</span>
                    </div>
                </div>
            </div>

            <!-- Sticky Alphabet Nav -->
            <div class="sticky top-40 md:top-32 z-40 bg-[#F6F2E8]/95 backdrop-blur-sm border-b border-slate-200 py-3 mb-6 overflow-x-auto whitespace-nowrap shadow-sm rounded-lg">
                <div class="flex gap-2 px-2" id="alphabet-nav">
                    <!-- Letters injected by JS -->
                </div>
            </div>

            <div id="lexicon-container" class="space-y-4">
                <!-- Sections A, B, C... injected by JS -->
            </div>
            
            <div id="noResults" class="hidden text-center py-12">
                <i class="fa-solid fa-ghost text-4xl text-slate-300 mb-3"></i>
                <p class="text-slate-500">Aucune locution trouv√©e.</p>
            </div>
        </div>

        <!-- VIEW 2: GAME (Flashcards) -->
        <div id="view-game" class="hidden transition-opacity duration-300 flex flex-col items-center justify-center min-h-[50vh]">
            
            <div class="text-center mb-8">
                <h2 class="text-2xl font-bold brand-blue-text mb-2">Mode Entra√Ænement</h2>
                <p class="text-slate-500 max-w-md mx-auto">Testez vos connaissances ! Regardez le terme, essayez de deviner la d√©finition, puis cliquez pour retourner la carte.</p>
            </div>

            <div class="perspective w-full max-w-lg h-[400px] cursor-pointer group" onclick="flipCard()">
                <div class="card-inner transition-transform duration-700 relative w-full h-full" id="game-card-inner">
                    
                    <!-- Front -->
                    <div class="card-front brand-blue-bg text-white border-4 border-[#D9A526] p-8">
                        <div class="absolute top-4 right-4 text-[#D9A526] text-4xl opacity-20">
                            <i class="fa-solid fa-question"></i>
                        </div>
                        <p class="text-[#D9A526] text-sm uppercase tracking-widest font-bold mb-6">Locution Latine</p>
                        <h3 id="card-term" class="text-4xl font-bold serif-font text-center">...</h3>
                        <p class="mt-8 text-sm text-slate-300 italic animate-pulse">Cliquez pour r√©v√©ler</p>
                    </div>

                    <!-- Back -->
                    <div class="card-back bg-white border border-slate-200 shadow-xl p-8">
                         <div class="absolute top-4 right-4 brand-bronze-text text-4xl opacity-20">
                            <i class="fa-solid fa-lightbulb"></i>
                        </div>
                        <h3 id="card-term-back" class="text-xl font-bold brand-blue-text serif-font mb-2">...</h3>
                        <p id="card-trans" class="text-[#D9A526] italic font-medium mb-4 pb-2 border-b border-slate-100">...</p>
                        
                        <div class="text-left w-full space-y-4 overflow-y-auto max-h-[250px] pr-2 custom-scroll">
                            <div>
                                <span class="text-xs font-bold text-slate-400 uppercase">D√©finition</span>
                                <p id="card-def" class="text-slate-700 text-sm leading-relaxed">...</p>
                            </div>
                            <div class="brand-ivory-bg p-3 rounded border-l-4 border-[#B4792A]">
                                <span class="text-xs font-bold brand-bronze-text uppercase block mb-1">Contexte / Exemple</span>
                                <p id="card-ex" class="text-slate-600 text-sm italic">...</p>
                            </div>
                        </div>
                    </div>

                </div>
            </div>

            <div class="mt-8 flex gap-4">
                <button onclick="nextCard()" class="px-8 py-3 bg-[#D9A526] hover:bg-[#b4881d] text-white font-bold rounded-full shadow-lg transition-transform hover:scale-105 active:scale-95 flex items-center gap-2">
                    Locution Suivante <i class="fa-solid fa-arrow-right"></i>
                </button>
            </div>

        </div>

    </main>

    <!-- Back to Top -->
    <button onclick="scrollToTop()" id="backToTop" class="fixed bottom-8 right-8 w-12 h-12 bg-[#0F2C48] text-white rounded-full shadow-lg flex items-center justify-center hover:bg-[#D9A526] transition-colors z-50 opacity-0 pointer-events-none duration-300">
        <i class="fa-solid fa-arrow-up"></i>
    </button>

    <!-- === D. FOOTER === -->
    <footer class="brand-blue-bg text-white mt-auto">
        <div class="max-w-7xl mx-auto px-4 py-8 md:py-12">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8 text-center md:text-left">
                <!-- Col 1 -->
                <div>
                    <h3 class="text-[#D9A526] font-bold text-lg mb-4 flex items-center justify-center md:justify-start gap-2">
                        <i class="fa-solid fa-pen-nib"></i> Mathilde Martine PAISLEY
                    </h3>
                    <p class="text-slate-300 text-sm leading-relaxed">
                        Cr√©ation originale et p√©dagogique pour les √©tudiants en droit.<br>
                        "Les indispensables du Latin Juridique"
                    </p>
                </div>
                <!-- Col 2 -->
                <div class="md:text-center">
                    <h3 class="text-[#F6F2E8] font-bold text-lg mb-4">Liens Utiles</h3>
                    <ul class="space-y-2 text-sm text-slate-300">
                        <li><a href="index.html" class="hover:text-[#D9A526] transition-colors">Accueil</a></li>
                        <li><a href="https://projettechacademy.github.io/Juridique/00_Autres/formation_live_juriste.html" class="hover:text-[#D9A526] transition-colors">Planning Live</a></li>
                        <li><a href="#" class="hover:text-[#D9A526] transition-colors">Mentions L√©gales</a></li>
                    </ul>
                </div>
                <!-- Col 3 -->
                <div class="md:text-right">
                    <h3 class="text-[#F6F2E8] font-bold text-lg mb-4">Contact</h3>
                    <p class="text-slate-300 text-sm mb-2"><i class="fa-regular fa-envelope mr-2"></i> mathilde.paisley@email.com</p>
                    <div class="flex gap-4 mt-4 justify-center md:justify-end">
                        <a href="#" class="w-8 h-8 rounded-full bg-[#D9A526] text-[#0F2C48] flex items-center justify-center hover:bg-white transition-colors"><i class="fa-brands fa-linkedin-in"></i></a>
                    </div>
                </div>
            </div>
            <div class="border-t border-white/10 mt-8 pt-8 text-center text-xs text-slate-400">
                <p>&copy; 2025 Mathilde Martine PAISLEY - Tous droits r√©serv√©s.</p>
            </div>
        </div>
    </footer>

    <script>
        // DATA
        const lexiconData = [
            { term: "A contrario", trans: "Par le contraire", def: "Argumentation d√©duisant d'une situation non pr√©vue l'application de la r√®gle inverse.", ex: "La loi pr√©voit X pour les CDI. A contrario, pour les CDD, c'est la r√®gle Y qui s'applique." },
            { term: "A fortiori", trans: "√Ä plus forte raison", def: "Argumentation qui √©tend une r√®gle √† un cas non pr√©vu, car les raisons sont encore plus √©videntes.", ex: "Si la faute simple justifie une sanction, a fortiori la faute grave justifie un licenciement." },
            { term: "Ab absurdo", trans: "Par l'absurde", def: "D√©montrer la fausset√© d'une proposition en montrant que sa cons√©quence est absurde.", ex: "Le raisonnement aboutirait √† ce que l'employeur paie le salari√© qui n'a jamais travaill√© : absurde." },
            { term: "Ab initio", trans: "D√®s le commencement", def: "Se dit d'un acte qui prend effet depuis son origine.", ex: "Si une condition essentielle manque, le contrat est nul ab initio." },
            { term: "Ab irato", trans: "Sous le coup de la col√®re", def: "Qualification d'un acte accompli sous l'emportement.", ex: "Une sanction prononc√©e ab irato risque d'√™tre annul√©e." },
            { term: "Abusus non tollit usum", trans: "L'abus n'emp√™che pas l'usage", def: "Le fait qu'un droit soit abus√© ne signifie pas qu'il n'existe pas.", ex: "L'abus des p√©riodes d'essai par certains ne supprime pas le droit d'en ins√©rer une." },
            { term: "Accessorium sequitur principale", trans: "L'accessoire suit le principal", def: "Le sort de l'accessoire est li√© √† celui de l'√©l√©ment principal.", ex: "L'annulation du contrat (principal) entra√Æne l'annulation de la clause de non-concurrence." },
            { term: "Actio personalis moritur cum persona", trans: "L'action meurt avec la personne", def: "L'action en justice s'√©teint avec le d√©c√®s.", ex: "Le d√©c√®s du salari√© met fin au contrat et aux actions personnelles." },
            { term: "Actori incumbit probatio", trans: "La preuve incombe au demandeur", def: "C'est √† celui qui all√®gue un fait de le prouver.", ex: "Le salari√© qui r√©clame des heures suppl√©mentaires doit les prouver." },
            { term: "Actor sequitur forum rei", trans: "Le demandeur suit le tribunal du d√©fendeur", def: "Le litige est port√© devant le tribunal du d√©fendeur.", ex: "Principe de comp√©tence territoriale." },
            { term: "Actus reus / Mens rea", trans: "Acte coupable / Esprit coupable", def: "√âl√©ments constitutifs de l'infraction (mat√©riel et moral).", ex: "Pour le vol : prendre (actus) avec l'intention de voler (mens)." },
            { term: "Ad cautelam", trans: "Par pr√©caution", def: "Par mesure de prudence.", ex: "Courrier de contestation envoy√© ad cautelam." },
            { term: "Ad hoc", trans: "√Ä cet effet pr√©cis", def: "Sp√©cialement d√©sign√© pour une fonction.", ex: "Administrateur ad hoc pour une succession d√©licate." },
            { term: "Ad impossibilia nemo tenetur", trans: "√Ä l'impossible nul n'est tenu", def: "On ne peut √™tre contraint √† une obligation impossible.", ex: "Cas de force majeure rendant le travail impossible." },
            { term: "Ad litem", trans: "Pour le proc√®s", def: "Relatif √† l'instance en cours.", ex: "Mandataire ad litem d√©sign√© pour la proc√©dure." },
            { term: "Ad nutum", trans: "Au gr√© de", def: "R√©voqu√© sans motif exig√©.", ex: "R√©vocation ad nutum du pr√©sident de SAS." },
            { term: "Ad probationem", trans: "√Ä titre de preuve", def: "Condition de forme pour prouver l'acte.", ex: "L'√©crit est souvent requis ad probationem." },
            { term: "Ad validitatem", trans: "√Ä titre de validit√©", def: "Condition de forme pour la validit√© de l'acte.", ex: "Certains contrats solennels exigent un √©crit ad validitatem." },
            { term: "Affectio societatis", trans: "Volont√© de s'associer", def: "Volont√© de collaborer √† l'≈ìuvre commune.", ex: "√âl√©ment essentiel du contrat de soci√©t√©." },
            { term: "Aliud est celare, aliud tacere", trans: "Cacher est une chose, se taire une autre", def: "Distinction entre r√©ticence dolosive et simple silence.", ex: "Dissimulation active vs omission." },
            { term: "Amicus curi√¶", trans: "Ami de la Cour", def: "Tiers pr√©sentant un avis √©clair√© au tribunal.", ex: "Une association d√©pose un m√©moire amicus curi√¶." },
            { term: "Argumentum a silentio", trans: "Argument du silence", def: "Conclure du silence d'un texte.", ex: "La loi ne l'interdit pas, donc c'est permis." },
            { term: "Audi alteram partem", trans: "Que l'autre partie soit entendue", def: "Principe du contradictoire.", ex: "Entretien pr√©alable au licenciement." },
            { term: "Bona fide", trans: "De bonne foi", def: "Honn√™tet√©, loyaut√©.", ex: "Ex√©cution du contrat de bonne foi." },
            { term: "Bonus dolus", trans: "Le bon dol", def: "Petite exag√©ration tol√©r√©e.", ex: "Embellir l√©g√®rement un CV (sans fausse d√©claration)." },
            { term: "Casus belli", trans: "Cas de guerre", def: "Fait justifiant une hostilit√© majeure.", ex: "Faute lourde justifiant rupture imm√©diate." },
            { term: "Caveat emptor", trans: "Que l'acheteur soit vigilant", def: "L'acheteur doit s'informer.", ex: "Vigilance dans les relations commerciales." },
            { term: "Cogito ergo sum", trans: "Je pense donc je suis", def: "Principe philosophique d'existence.", ex: "Capacit√© juridique de la personne physique." },
            { term: "Contra legem", trans: "Contre la loi", def: "Acte violant la r√®gle l√©gale.", ex: "Clause inf√©rieure au SMIC." },
            { term: "Corpus delicti", trans: "Corps du d√©lit", def: "√âl√©ment mat√©riel de l'infraction.", ex: "L'objet vol√©." },
            { term: "Cui bono ?", trans: "√Ä qui profite le crime ?", def: "Recherche du mobile.", ex: "Enqu√™te interne." },
            { term: "Culpa lata", trans: "Faute lourde", def: "Faute d'une extr√™me gravit√©.", ex: "Intention de nuire." },
            { term: "Culpa levis", trans: "Faute l√©g√®re", def: "Simple n√©gligence.", ex: "Erreur involontaire." },
            { term: "Curia novit iura", trans: "La Cour conna√Æt le droit", def: "Le juge applique la r√®gle de droit ad√©quate.", ex: "Requalification juridique par le juge." },
            { term: "Damnum emergens", trans: "Dommage √©mergent", def: "Perte subie imm√©diatement.", ex: "Perte de salaire." },
            { term: "De facto", trans: "De fait", def: "Situation r√©elle.", ex: "G√©rant de fait." },
            { term: "De jure", trans: "De droit", def: "Situation l√©gale.", ex: "G√©rant de droit." },
            { term: "Dura lex, sed lex", trans: "La loi est dure, mais c'est la loi", def: "Application stricte de la loi.", ex: "Rigueur des d√©lais de prescription." },
            { term: "Erga omnes", trans: "√Ä l'√©gard de tous", def: "Opposable √† tout le monde.", ex: "Publication au greffe." },
            { term: "Exceptio non adimpleti contractus", trans: "Exception d'inex√©cution", def: "Suspension si l'autre ne paie pas/n'ex√©cute pas.", ex: "Droit de retrait." },
            { term: "Ex nunc", trans: "Pour l'avenir", def: "Pas d'effet r√©troactif.", ex: "R√©siliation." },
            { term: "Ex tunc", trans: "Depuis l'origine", def: "Effet r√©troactif.", ex: "Nullit√© du contrat." },
            { term: "In abstracto", trans: "Dans l'abstrait", def: "Par rapport √† un standard moyen.", ex: "Le bon p√®re de famille." },
            { term: "In concreto", trans: "Dans le concret", def: "Selon les circonstances r√©elles.", ex: "Appr√©ciation de la faute." },
            { term: "In limine litis", trans: "Au seuil du proc√®s", def: "Avant tout d√©bat au fond.", ex: "Exception de proc√©dure." },
            { term: "In solidum", trans: "Solidairement", def: "Tenus ensemble de la dette.", ex: "Condamnation solidaire." },
            { term: "Intuitu person√¶", trans: "En consid√©ration de la personne", def: "La personne est d√©terminante.", ex: "Contrat de travail." },
            { term: "Ipso facto", trans: "Par le fait m√™me", def: "Automatiquement.", ex: "Fin du CDD √† l'√©ch√©ance." },
            { term: "Lucrum cessans", trans: "Gain manqu√©", def: "Manque √† gagner.", ex: "Perte de commissions futures." },
            { term: "Mala fides", trans: "Mauvaise foi", def: "Intention malhonn√™te.", ex: "Sabotage." },
            { term: "Mutatis mutandis", trans: "En changeant ce qui doit l'√™tre", def: "Adaptation √† un contexte diff√©rent.", ex: "Application par analogie." },
            { term: "Mutuus dissensus", trans: "Consentement mutuel √† rompre", def: "Accord pour rompre.", ex: "Rupture conventionnelle." },
            { term: "Ne bis in idem", trans: "Pas deux fois pour la m√™me chose", def: "Interdiction de double sanction.", ex: "Avertissement puis licenciement pour les m√™mes faits : interdit." },
            { term: "Nemo auditur...", trans: "Nul ne peut se pr√©valoir de sa turpitude", def: "On ne r√©clame pas justice d'une situation ill√©gale qu'on a cr√©√©e.", ex: "Fraudeur r√©clamant des indemnit√©s." },
            { term: "Nemo censetur ignorare legem", trans: "Nul n'est cens√© ignorer la loi", def: "L'ignorance n'est pas une excuse.", ex: "L'employeur doit conna√Ætre le Code du travail." },
            { term: "Nullum crimen sine lege", trans: "Pas de crime sans loi", def: "L√©galit√© des d√©lits et peines.", ex: "Sanction pr√©vue au r√®glement int√©rieur." },
            { term: "Pacta sunt servanda", trans: "Les contrats doivent √™tre respect√©s", def: "Force obligatoire du contrat.", ex: "Le contrat est la loi des parties." },
            { term: "Prima facie", trans: "√Ä premi√®re vue", def: "Apparence de v√©rit√©.", ex: "Preuve apparente." },
            { term: "Pro rata temporis", trans: "Proportionnel au temps", def: "Calcul selon la dur√©e.", ex: "Calcul des cong√©s pay√©s." },
            { term: "Quantum", trans: "Montant", def: "La somme due.", ex: "Quantum des dommages-int√©r√™ts." },
            { term: "Quid pro quo", trans: "Donnant donnant", def: "Contrepartie.", ex: "Salaire contre travail." },
            { term: "Ratio decidendi", trans: "Raison de la d√©cision", def: "Motif juridique d√©terminant.", ex: "Fondement de la jurisprudence." },
            { term: "Res judicata", trans: "Chose jug√©e", def: "D√©finitif.", ex: "Autorit√© de la chose jug√©e." },
            { term: "Statu quo", trans: "√âtat actuel", def: "Maintien de la situation.", ex: "Geler les positions." },
            { term: "Sub judice", trans: "En cours de jugement", def: "Affaire non tranch√©e.", ex: "Devant le tribunal." },
            { term: "Sui generis", trans: "De son propre genre", def: "Sp√©cifique, unique.", ex: "Contrat atypique." },
            { term: "Ultra petita", trans: "Au-del√† de la demande", def: "Statuer sur ce qui n'est pas demand√©.", ex: "Interdiction pour le juge." },
            { term: "Vacatio legis", trans: "Vacance de la loi", def: "D√©lai avant application.", ex: "Entr√©e en vigueur diff√©r√©e." }
        ];

        // Ensure data is sorted alphabetically
        lexiconData.sort((a, b) => a.term.localeCompare(b.term));

        // UTILS
        const $ = (id) => document.getElementById(id);
        
        let totalTermsEl, container, alphabetNav, searchInput, noResults, backToTopBtn;
        
        function initLexicon() {
            totalTermsEl.textContent = lexiconData.length;

            // Group by Letter
            const grouped = {};
            lexiconData.forEach(item => {
                const letter = item.term.charAt(0).toUpperCase();
                if (!grouped[letter]) grouped[letter] = [];
                grouped[letter].push(item);
            });

            // 1. Generate Alphabet Nav
            const letters = Object.keys(grouped).sort();
            letters.forEach(letter => {
                const btn = document.createElement('button');
                btn.className = 'px-3 py-1 text-sm font-bold text-slate-500 hover:text-[#D9A526] hover:bg-white rounded transition-colors';
                btn.textContent = letter;
                btn.onclick = () => scrollToLetter(letter);
                alphabetNav.appendChild(btn);
            });

            // 2. Generate Accordions
            container.innerHTML = '';
            letters.forEach(letter => {
                const section = document.createElement('div');
                section.id = `section-${letter}`;
                section.className = 'border border-slate-200 rounded-lg overflow-hidden bg-white shadow-sm';

                // Header
                const header = document.createElement('button');
                header.className = 'w-full flex justify-between items-center p-4 brand-ivory-bg hover:bg-[#eae6db] transition-colors text-left';
                header.onclick = () => toggleAccordion(letter);
                header.innerHTML = `
                    <div class="flex items-center gap-3">
                        <span class="w-8 h-8 rounded-full brand-blue-bg text-white flex items-center justify-center font-bold">${letter}</span>
                        <span class="font-bold brand-blue-text text-lg">${grouped[letter].length} locutions</span>
                    </div>
                    <i id="icon-${letter}" class="fa-solid fa-chevron-down text-slate-400 transition-transform duration-300"></i>
                `;

                // Content
                const contentWrapper = document.createElement('div');
                contentWrapper.id = `content-${letter}`;
                contentWrapper.className = 'accordion-content';
                
                const grid = document.createElement('div');
                grid.className = 'p-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 bg-white';
                
                grouped[letter].forEach(item => {
                    const card = document.createElement('div');
                    card.className = 'p-4 border border-slate-100 rounded hover:shadow-md transition-shadow bg-white flex flex-col h-full search-item';
                    card.innerHTML = `
                        <h3 class="font-bold brand-blue-text text-lg mb-1 serif-font">${item.term}</h3>
                        <p class="text-[#B4792A] italic text-sm mb-3 border-b border-slate-100 pb-2">${item.trans}</p>
                        <p class="text-slate-600 text-sm mb-3 flex-grow">${item.def}</p>
                        <div class="bg-slate-50 p-2 rounded text-xs border-l-2 border-[#D9A526]">
                            <span class="font-bold text-[#0F2C48]">Exemple :</span> <span class="text-slate-500 italic">${item.ex}</span>
                        </div>
                    `;
                    grid.appendChild(card);
                });

                contentWrapper.appendChild(grid);
                section.appendChild(header);
                section.appendChild(contentWrapper);
                container.appendChild(section);
            });
        }

        function toggleAccordion(letter) {
            const content = $(`content-${letter}`);
            const icon = $(`icon-${letter}`);
            const isOpen = content.classList.contains('open');
            if (isOpen) {
                content.classList.remove('open');
                icon.style.transform = 'rotate(0deg)';
            } else {
                content.classList.add('open');
                icon.style.transform = 'rotate(180deg)';
            }
        }

        function scrollToLetter(letter) {
            const el = $(`section-${letter}`);
            const content = $(`content-${letter}`);
            if (!content.classList.contains('open')) toggleAccordion(letter);
            
            const offset = 220; // Adjusted for taller header
            const bodyRect = document.body.getBoundingClientRect().top;
            const elementRect = el.getBoundingClientRect().top;
            const elementPosition = elementRect - bodyRect;
            const offsetPosition = elementPosition - offset;

            window.scrollTo({
                top: offsetPosition,
                behavior: 'smooth'
            });
        }

        // --- GAME LOGIC ---
        let currentCardIndex = -1;

        function pickRandomCard() {
            const cardInner = $('game-card-inner');
            const wasFlipped = cardInner.parentElement.classList.contains('flipped');
            if (wasFlipped) {
                cardInner.parentElement.classList.remove('flipped');
                setTimeout(() => setNewCardContent(), 300);
            } else {
                setNewCardContent();
            }
        }

        function setNewCardContent() {
            let newIndex;
            do {
                newIndex = Math.floor(Math.random() * lexiconData.length);
            } while (newIndex === currentCardIndex);
            
            currentCardIndex = newIndex;
            const item = lexiconData[currentCardIndex];

            $('card-term').textContent = item.term;
            $('card-term-back').textContent = item.term;
            $('card-trans').textContent = `"${item.trans}"`;
            $('card-def').textContent = item.def;
            $('card-ex').textContent = item.ex;
        }

        function flipCard() {
            const card = $('game-card-inner').parentElement;
            card.classList.toggle('flipped');
        }

        function nextCard() {
            pickRandomCard();
        }

        function switchTab(tabId) {
            document.querySelectorAll('.nav-btn').forEach(el => {
                if(el.id.startsWith('tab-')) el.classList.remove('active');
            });
            const btn = $(`tab-${tabId}`);
            if(btn) btn.classList.add('active');

            if (tabId === 'lexique') {
                $('view-lexique').classList.remove('hidden');
                $('view-game').classList.add('hidden');
            } else {
                $('view-lexique').classList.add('hidden');
                $('view-game').classList.remove('hidden');
                pickRandomCard();
            }
        }

        function scrollToTop() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function init() {
            totalTermsEl = $('total-terms');
            container = $('lexicon-container');
            alphabetNav = $('alphabet-nav');
            searchInput = $('searchInput');
            noResults = $('noResults');
            backToTopBtn = $('backToTop');

            searchInput.addEventListener('input', (e) => {
                const query = e.target.value.toLowerCase();
                const sections = container.children;
                let hasResults = false;

                Array.from(sections).forEach(section => {
                    const content = section.querySelector('.accordion-content');
                    const cards = content.querySelectorAll('.search-item');
                    let sectionHasMatch = false;

                    cards.forEach(card => {
                        const text = card.textContent.toLowerCase();
                        if (text.includes(query)) {
                            card.style.display = 'flex';
                            sectionHasMatch = true;
                            hasResults = true;
                        } else {
                            card.style.display = 'none';
                        }
                    });

                    if (query.length > 0 && sectionHasMatch) {
                        section.style.display = 'block';
                        if (!content.classList.contains('open')) content.classList.add('open');
                    } else if (query.length > 0 && !sectionHasMatch) {
                        section.style.display = 'none';
                    } else {
                        section.style.display = 'block';
                        cards.forEach(c => c.style.display = 'flex');
                        content.classList.remove('open');
                    }
                });

                if (!hasResults && query.length > 0) {
                    noResults.classList.remove('hidden');
                } else {
                    noResults.classList.add('hidden');
                }
            });

            window.onscroll = function() {
                if (document.body.scrollTop > 300 || document.documentElement.scrollTop > 300) {
                    backToTopBtn.classList.remove('opacity-0', 'pointer-events-none');
                    backToTopBtn.classList.add('opacity-100', 'pointer-events-auto');
                } else {
                    backToTopBtn.classList.add('opacity-0', 'pointer-events-none');
                    backToTopBtn.classList.remove('opacity-100', 'pointer-events-auto');
                }
            };
            
            initLexicon();
        }

        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', init);
        } else {
            init();
        }
    </script>
</body>
</html>